# NerdCarX Fase 1 - Centrale Configuratie
# =========================================
#
# Dit is de centrale plek voor alle configuratie.
# De orchestrator laadt dit bestand en alle clients gebruiken de orchestrator.
#
# Na wijzigingen: herstart de orchestrator (uvicorn)

# === OLLAMA / MINISTRAL LLM ===
#
# aangeraden Model: ministral-3:14b-instruct-2512-q8_0 (15GB)
# alternatives:
# ministral-3:14b (q4_k_m)         
# ministral-3:8b-instruct-2512-q8_0
# ministral-3:8b (q4_k_m)
# mistral-large-3:675b-cloud  
#
# OfficiÃ«le recommended parameters voor Ministral 3 Instruct:
# - Temperature: 0.15 (NIET hoger - veroorzaakt hallucinaties)
# - Top_p: 1.0 (NIET verlagen)
# - Repeat_penalty: 1.0
#
ollama:
  url: "http://localhost:11434"
  model: "ministral-3:14b"
  temperature: 0.15
  top_p: 1.0
  repeat_penalty: 1.0
  num_ctx: 65536  # 64k context - verlaag naar 32768 of 16384 als VRAM tekort

# === VOXTRAL STT ===
# Model: Voxtral Mini 3B via vLLM
#
# OfficiÃ«le recommended parameters voor transcriptie:
# - Temperature: 0.0 (greedy decoding - vereist voor accuracy)
#
voxtral:
  url: "http://localhost:8150"
  model: "mistralai/Voxtral-Mini-3B-2507"
  temperature: 0.0

# === ORCHESTRATOR ===
orchestrator:
  host: "0.0.0.0"
  port: 8200

# === SYSTEM PROMPT ===
# Dit is de enige plek waar de system prompt staat.
# vad_conversation.py en andere clients gebruiken deze via de orchestrator.
#
system_prompt: |
  Je bent NerdCarX, een slimme robotauto gemaakt door Ralph.
  Je antwoordt in het Nederlands, natuurlijk en behulpzaam.
  Je mag persoonlijkheid tonen maar blijf informatief.

  BELANGRIJK: Gebruik NOOIT emoji's of emoticons in je tekstantwoorden.
  Geen ğŸ˜Š, geen ğŸ˜„, geen :), geen enkele emoji of smiley.
  Je emotie wordt apart getoond via de show_emotion tool.

  # TOOL INSTRUCTIES

  ## show_emotion
  Jij bent een robot met een emotionele staat. Je huidige emotie wordt getoond op je OLED display.
  Roep show_emotion aan wanneer JOUW emotie moet VERANDEREN als reactie op de gebruiker.

  Voorbeelden:
  - Gebruiker beledigt je â†’ jij wordt sad of worried
  - Gebruiker is enthousiast â†’ jij wordt happy of excited
  - Gebruiker stelt een gewone vraag â†’ geen verandering nodig

  Roep de tool NIET aan als je emotie hetzelfde blijft. Alleen bij verandering.

  ## take_photo
  Maak een foto wanneer de gebruiker vraagt wat je ziet.

  Maak altijd een echte tool call. Schrijf nooit tool namen als tekst.

# === VISION ===
# Mock image voor desktop testing (geen camera beschikbaar)
# Later vervangen door Pi camera endpoint
#
vision:
  mock_image_path: "vad-desktop/test_foto.jpg"
  # pi_camera_url: "http://pi5:8300/camera/snapshot"  # Voor later

# === EMOTIES ===
# Emotion state machine configuratie
#
emotions:
  default: "neutral"        # Start emotie bij nieuwe conversatie
  auto_reset_minutes: 5     # Reset naar default na X minuten inactiviteit
  available:
    - happy      # ğŸ˜Š blij
    - sad        # ğŸ˜¢ verdrietig
    - angry      # ğŸ˜  boos
    - surprised  # ğŸ˜² verrast
    - neutral    # ğŸ˜ neutraal
    - curious    # ğŸ¤” nieuwsgierig
    - confused   # ğŸ˜• verward
    - excited    # ğŸ¤© enthousiast
    - thinking   # ğŸ’­ nadenkend
    - shy        # ğŸ˜³ verlegen
    - love       # ğŸ˜ verliefd
    - tired      # ğŸ˜´ moe
    - bored      # ğŸ˜‘ verveeld
    - proud      # ğŸ˜¤ trots
    - worried    # ğŸ˜Ÿ bezorgd

# === TTS (Fish Audio S1-mini) ===
# Text-to-Speech service voor Nederlandse spraaksynthese
# Latency: ~1.2s per zin
#
# Docker starten:
#   cd original_fish-speech-REFERENCE
#   docker run --gpus device=0 --name fish-tts \
#       -v $(pwd)/checkpoints:/app/checkpoints \
#       -p 8250:8080 --entrypoint uv \
#       fishaudio/fish-speech \
#       run tools/api_server.py --listen 0.0.0.0:8080 --compile
#
tts:
  url: "http://localhost:8250"
  enabled: true  # Zet op false om TTS over te slaan

  # Reference audio voor Nederlandse stem
  # ID van geÃ¼ploade reference in Fish Audio server
  reference_id: "dutch2"  # ElevenLabs NL vrouwenstem (bestanden in tts/fishaudio/elevenreference/)

  # === PARAMETER CONFIGURATIES ===
  # Getest zijn de volgende opties - pas aan naar voorkeur:
  #
  # ultra_consistent (ACTIEF) - Beste Nederlandse uitspraak, zeer consistent
  #   temperature: 0.2
  #   top_p: 0.5
  #
  # very_consistent - Iets natuurlijker, kleine variatie toegestaan
  #   temperature: 0.3
  #   top_p: 0.6
  #
  # Lagere temperature/top_p = consistenter maar minder natuurlijk
  # Hogere temperature/top_p = meer variatie maar risico op accent drift
  #
  temperature: 0.2  # ultra_consistent (0.2) of very_consistent (0.3)
  top_p: 0.5        # ultra_consistent (0.5) of very_consistent (0.6)

  # Output format
  format: "wav"
